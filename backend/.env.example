# ============================================
# NestJS 後端環境變數配置
# ============================================
# 複製此文件為 .env 並填入實際值

# ============================================
# 應用配置
# ============================================
# 服務端口
PORT=3000

# 環境模式: development | production | test
NODE_ENV=development

# ============================================
# 資料庫配置（Prisma）
# ============================================
# Prisma 使用標準的 DATABASE_URL 格式
# 格式: postgresql://[user]:[password]@[host]:[port]/[database]
# 
# 本地開發（PostgreSQL）:
DATABASE_URL=postgresql://postgres:password@localhost:5432/9jang_db

# Cloud SQL (GCP) - 使用 Unix Socket:
# DATABASE_URL=postgresql://user:password@/9jang_db?host=/cloudsql/PROJECT_ID:REGION:INSTANCE_NAME

# Cloud SQL (GCP) - 使用 TCP:
# DATABASE_URL=postgresql://user:password@INSTANCE_IP:5432/9jang_db

# SQLite (僅開發測試，不推薦):
# DATABASE_URL=file:./dev.db

# ============================================
# JWT 認證配置
# ============================================
# JWT 密鑰（生產環境請務必修改！）
# 可以使用以下命令生成安全的密鑰:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-secret-key-here-change-in-production

# Access Token 有效期（小時）
JWT_ACCESS_TOKEN_LIFETIME_HOURS=1

# Refresh Token 有效期（天）
JWT_REFRESH_TOKEN_LIFETIME_DAYS=7

# ============================================
# CORS 配置
# ============================================
# 允許的來源（逗號分隔，空格會自動移除）
# 開發環境:
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173,http://127.0.0.1:3000

# 生產環境範例:
# CORS_ORIGINS=https://your-frontend-domain.com,https://admin.your-domain.com

# ============================================
# 媒體文件配置
# ============================================
# 本地存儲（開發環境）:
MEDIA_ROOT=./media
MEDIA_URL=/media/

# 如果使用 Google Cloud Storage（生產環境）:
# GS_BUCKET_NAME=your-project-id-media
# GS_PROJECT_ID=your-project-id
# MEDIA_URL=https://storage.googleapis.com/your-project-id-media/

# ============================================
# 時區和語言配置
# ============================================
TIME_ZONE=Asia/Taipei
LANGUAGE_CODE=zh-hant

# ============================================
# GCP 配置（僅生產環境需要）
# ============================================
# GCP_PROJECT_ID=your-project-id
# GCP_REGION=asia-east1
# USE_SECRET_MANAGER=false

# ============================================
# 日誌配置（可選）
# ============================================
# 日誌級別: error, warn, info, debug, verbose
# LOG_LEVEL=info

# 日誌文件路徑
# LOG_FILE_PATH=./logs

# ============================================
# 速率限制配置（可選）
# ============================================
# RATE_LIMIT_TTL=60
# RATE_LIMIT_MAX=100

# ============================================
# 文件上傳限制（可選）
# ============================================
# 最大文件大小（bytes）
# MAX_FILE_SIZE=10485760

# 允許的文件類型（逗號分隔）
# ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# ============================================
# Redis 配置（可選，用於快取或 Session）
# ============================================
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0

# ============================================
# Email 配置（可選，用於通知）
# ============================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@your-domain.com
