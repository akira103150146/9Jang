# ç¨‹å¼ç¢¼è¤‡é›œåº¦åˆ†æèˆ‡é‡æ§‹å»ºè­°

## åˆ†ææ—¥æœŸ
2026-01-26

## æ¦‚è¿°
æœ¬å ±å‘Šåˆ†æäº† frontend å’Œ backend ç›®éŒ„ä¸­è¤‡é›œåº¦éé«˜çš„æª”æ¡ˆï¼Œä¸¦æä¾›é‡æ§‹å»ºè­°ã€‚

---

## ğŸ”´ é«˜å„ªå…ˆç´šé‡æ§‹ï¼ˆè¶…é 1000 è¡Œï¼‰

### 1. `frontend/src/services/api.ts` (1759 è¡Œ)
**è¤‡é›œåº¦æŒ‡æ¨™ï¼š**
- è¡Œæ•¸ï¼š1759
- å°å‡ºçš„ API æ¨¡çµ„ï¼š35+ å€‹
- å•é¡Œï¼šå–®ä¸€æª”æ¡ˆåŒ…å«æ‰€æœ‰ API èª¿ç”¨ï¼Œé•åå–®ä¸€è·è²¬åŸå‰‡

**å•é¡Œåˆ†æï¼š**
- åŒ…å«æ‰€æœ‰ API ç«¯é»çš„å®šç¾©ï¼ˆStudent, Teacher, Course, Question, Resource ç­‰ï¼‰
- å¤§é‡é‡è¤‡çš„ CRUD æ¨¡å¼
- é›£ä»¥ç¶­è­·å’Œæ¸¬è©¦
- å¤šäººå”ä½œæ™‚å®¹æ˜“ç”¢ç”Ÿè¡çª

**é‡æ§‹å»ºè­°ï¼š**
```
å»ºè­°æ‹†åˆ†ç‚ºæ¨¡çµ„åŒ–çµæ§‹ï¼š
frontend/src/services/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ index.ts              # çµ±ä¸€å°å‡ºå’Œ axios å¯¦ä¾‹é…ç½®
â”‚   â”œâ”€â”€ interceptors.ts       # è«‹æ±‚/éŸ¿æ‡‰æ””æˆªå™¨
â”‚   â”œâ”€â”€ types.ts              # å…±ç”¨é¡å‹å®šç¾©
â”‚   â””â”€â”€ utils.ts              # å·¥å…·å‡½æ•¸ï¼ˆnormalizeDateTime ç­‰ï¼‰
â”œâ”€â”€ student/
â”‚   â”œâ”€â”€ student.api.ts        # Student API
â”‚   â””â”€â”€ student.types.ts     # Student ç›¸é—œé¡å‹
â”œâ”€â”€ teacher/
â”‚   â”œâ”€â”€ teacher.api.ts
â”‚   â””â”€â”€ teacher.types.ts
â”œâ”€â”€ question/
â”‚   â”œâ”€â”€ question.api.ts
â”‚   â””â”€â”€ question.types.ts
â”œâ”€â”€ course/
â”‚   â”œâ”€â”€ course.api.ts
â”‚   â””â”€â”€ course.types.ts
â””â”€â”€ ... (å…¶ä»–æ¨¡çµ„)
```

**å„ªå…ˆç´šï¼š** â­â­â­â­â­ (æœ€é«˜)

---

### 2. `frontend/src/views/QuestionForm.vue` (1370 è¡Œ)
**è¤‡é›œåº¦æŒ‡æ¨™ï¼š**
- è¡Œæ•¸ï¼š1370
- å•é¡Œï¼šå–®ä¸€çµ„ä»¶åŒ…å«éå¤šé‚è¼¯

**å•é¡Œåˆ†æï¼š**
- è¡¨å–®é©—è­‰é‚è¼¯è¤‡é›œ
- åŒ…å«å¤šç¨®é¡Œç›®é¡å‹çš„è™•ç†
- ç« ç¯€æœå°‹ã€é¸é …ç®¡ç†ç­‰é‚è¼¯æ··é›œ
- é›£ä»¥æ¸¬è©¦å’Œç¶­è­·

**é‡æ§‹å»ºè­°ï¼š**
```
å»ºè­°æ‹†åˆ†ç‚ºï¼š
1. QuestionForm.vue (ä¸»çµ„ä»¶ï¼Œç´„ 300-400 è¡Œ)
   - åªè² è²¬è¡¨å–®çµæ§‹å’ŒåŸºæœ¬ç‹€æ…‹ç®¡ç†
   
2. composables/
   - useQuestionForm.ts        # è¡¨å–®ç‹€æ…‹å’Œé©—è­‰é‚è¼¯
   - useQuestionOptions.ts      # é¸é …ç®¡ç†é‚è¼¯
   - useChapterSearch.ts        # ç« ç¯€æœå°‹é‚è¼¯
   
3. components/
   - QuestionTypeSelector.vue   # é¡Œç›®é¡å‹é¸æ“‡
   - QuestionOptionsEditor.vue  # é¸é …ç·¨è¼¯å™¨
   - QuestionContentEditor.vue  # å…§å®¹ç·¨è¼¯å™¨
   - QuestionAnswerEditor.vue   # ç­”æ¡ˆç·¨è¼¯å™¨
```

**å„ªå…ˆç´šï¼š** â­â­â­â­

---

### 3. `frontend/src/composables/usePrintPreview.ts` (1318 è¡Œ)
**è¤‡é›œåº¦æŒ‡æ¨™ï¼š**
- è¡Œæ•¸ï¼š1318
- å•é¡Œï¼šå–®ä¸€ composable åŒ…å«éå¤šåŠŸèƒ½

**å•é¡Œåˆ†æï¼š**
- åŒ…å« DOM å…‹éš†ã€æ¨£å¼æå–ã€KaTeX ä¿®å¾©ç­‰å¤šç¨®åŠŸèƒ½
- åˆ—å°æ¨£å¼ç”Ÿæˆé‚è¼¯è¤‡é›œ
- å¿«å–ç®¡ç†é‚è¼¯æ··é›œ

**é‡æ§‹å»ºè­°ï¼š**
```
å·²ç¶“éƒ¨åˆ†æ‹†åˆ†ï¼ˆusePrintDOMCloning, usePrintStyleExtraction, usePrintKatexRepairï¼‰ï¼Œ
å»ºè­°é€²ä¸€æ­¥å„ªåŒ–ï¼š

1. usePrintPreview.ts (ä¸» composableï¼Œç´„ 200-300 è¡Œ)
   - åªè² è²¬å”èª¿å’Œç‹€æ…‹ç®¡ç†
   
2. composables/print/
   - usePrintDOMCloning.ts      # DOM å…‹éš†ï¼ˆå·²å­˜åœ¨ï¼‰
   - usePrintStyleExtraction.ts # æ¨£å¼æå–ï¼ˆå·²å­˜åœ¨ï¼‰
   - usePrintKatexRepair.ts     # KaTeX ä¿®å¾©ï¼ˆå·²å­˜åœ¨ï¼‰
   - usePrintCache.ts            # å¿«å–ç®¡ç†
   - usePrintWatermark.ts        # æµ®æ°´å°è™•ç†
   - usePrintStyles.ts           # æ¨£å¼ç”Ÿæˆ
```

**å„ªå…ˆç´šï¼š** â­â­â­

---

## ğŸŸ¡ ä¸­å„ªå…ˆç´šé‡æ§‹ï¼ˆ500-1000 è¡Œï¼‰

### 4. `frontend/src/components/QuestionList.vue` (1077 è¡Œ)
**å•é¡Œåˆ†æï¼š**
- åˆ—è¡¨é¡¯ç¤ºã€ç¯©é¸ã€æœå°‹é‚è¼¯æ··é›œ
- åŒ…å«å¤§é‡ UI é‚è¼¯

**é‡æ§‹å»ºè­°ï¼š**
```
æ‹†åˆ†ç‚ºï¼š
1. QuestionList.vue (ä¸»çµ„ä»¶)
2. composables/useQuestionList.ts  # åˆ—è¡¨é‚è¼¯
3. components/QuestionFilters.vue  # ç¯©é¸å™¨
4. components/QuestionTable.vue    # è¡¨æ ¼çµ„ä»¶
```

**å„ªå…ˆç´šï¼š** â­â­â­

---

### 5. `backend/src/cramschool/services/questions.service.ts` (867 è¡Œ)
**è¤‡é›œåº¦æŒ‡æ¨™ï¼š**
- è¡Œæ•¸ï¼š867
- æ–¹æ³•æ•¸ï¼š13+ å€‹æ–¹æ³•
- å•é¡Œï¼šå–®ä¸€æœå‹™åŒ…å«éå¤šè·è²¬

**å•é¡Œåˆ†æï¼š**
- åŒ…å« CRUDã€åŒ¯å…¥/åŒ¯å‡ºã€æœå°‹ç­‰å¤šç¨®åŠŸèƒ½
- æ¬Šé™æª¢æŸ¥é‚è¼¯åˆ†æ•£
- è³‡æ–™è½‰æ›é‚è¼¯è¤‡é›œ

**é‡æ§‹å»ºè­°ï¼š**
```
å»ºè­°æ‹†åˆ†ç‚ºï¼š
backend/src/cramschool/services/questions/
â”œâ”€â”€ questions.service.ts          # æ ¸å¿ƒ CRUDï¼ˆç´„ 300 è¡Œï¼‰
â”œâ”€â”€ questions-query.service.ts    # æŸ¥è©¢å’Œç¯©é¸é‚è¼¯
â”œâ”€â”€ questions-import.service.ts   # åŒ¯å…¥é‚è¼¯ï¼ˆWord, Markdownï¼‰
â”œâ”€â”€ questions-export.service.ts   # åŒ¯å‡ºé‚è¼¯ï¼ˆLaTeX, Markdownï¼‰
â””â”€â”€ questions-permission.service.ts # æ¬Šé™æª¢æŸ¥
```

**å„ªå…ˆç´šï¼š** â­â­â­â­

---

### 6. `backend/src/cramschool/services/students.service.ts` (844 è¡Œ)
**è¤‡é›œåº¦æŒ‡æ¨™ï¼š**
- è¡Œæ•¸ï¼š844
- æ–¹æ³•æ•¸ï¼š12+ å€‹æ–¹æ³•
- å•é¡Œï¼šå–®ä¸€æœå‹™åŒ…å«éå¤šè·è²¬

**å•é¡Œåˆ†æï¼š**
- åŒ…å«è¤‡é›œçš„æŸ¥è©¢é‚è¼¯ï¼ˆè§’è‰²éæ¿¾ã€æ¨™ç±¤ç¯©é¸ã€èª²ç¨‹ç¯©é¸ç­‰ï¼‰
- è²»ç”¨è¨ˆç®—é‚è¼¯æ··é›œ
- æ¬Šé™æª¢æŸ¥é‚è¼¯åˆ†æ•£

**é‡æ§‹å»ºè­°ï¼š**
```
å»ºè­°æ‹†åˆ†ç‚ºï¼š
backend/src/cramschool/services/students/
â”œâ”€â”€ students.service.ts           # æ ¸å¿ƒ CRUDï¼ˆç´„ 300 è¡Œï¼‰
â”œâ”€â”€ students-query.service.ts     # æŸ¥è©¢å’Œç¯©é¸é‚è¼¯
â”œâ”€â”€ students-fee.service.ts       # è²»ç”¨ç›¸é—œé‚è¼¯
â”œâ”€â”€ students-permission.service.ts # æ¬Šé™æª¢æŸ¥
â””â”€â”€ students-stats.service.ts     # çµ±è¨ˆè¨ˆç®—
```

**å„ªå…ˆç´šï¼š** â­â­â­â­

---

### 7. `frontend/src/views/StudentList.vue` (792 è¡Œ)
**å•é¡Œåˆ†æï¼š**
- åˆ—è¡¨ã€ç¯©é¸ã€æœå°‹é‚è¼¯è¤‡é›œ
- åŒ…å«å¤§é‡ç‹€æ…‹ç®¡ç†

**é‡æ§‹å»ºè­°ï¼š**
```
æ‹†åˆ†ç‚ºï¼š
1. StudentList.vue (ä¸»çµ„ä»¶)
2. composables/useStudentList.ts
3. components/StudentFilters.vue
4. components/StudentTable.vue
```

**å„ªå…ˆç´šï¼š** â­â­â­

---

### 8. `frontend/src/router/index.ts` (611 è¡Œ)
**å•é¡Œåˆ†æï¼š**
- æ‰€æœ‰è·¯ç”±å®šç¾©é›†ä¸­åœ¨å–®ä¸€æª”æ¡ˆ
- è·¯ç”±æ•¸é‡å¤šï¼Œé›£ä»¥ç¶­è­·

**é‡æ§‹å»ºè­°ï¼š**
```
å»ºè­°æ‹†åˆ†ç‚ºï¼š
frontend/src/router/
â”œâ”€â”€ index.ts                 # è·¯ç”±é…ç½®å’Œå®ˆè¡›
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ student.routes.ts   # å­¸ç”Ÿç›¸é—œè·¯ç”±
â”‚   â”œâ”€â”€ teacher.routes.ts   # è€å¸«ç›¸é—œè·¯ç”±
â”‚   â”œâ”€â”€ course.routes.ts    # èª²ç¨‹ç›¸é—œè·¯ç”±
â”‚   â”œâ”€â”€ question.routes.ts  # é¡Œç›®ç›¸é—œè·¯ç”±
â”‚   â””â”€â”€ ... (å…¶ä»–æ¨¡çµ„è·¯ç”±)
â””â”€â”€ guards/
    â”œâ”€â”€ auth.guard.ts
    â””â”€â”€ permission.guard.ts
```

**å„ªå…ˆç´šï¼š** â­â­â­

---

## ğŸŸ¢ ä½å„ªå…ˆç´šé‡æ§‹ï¼ˆå¯é¸ï¼‰

### 9. `backend/src/cramschool/services/resources.service.ts` (548 è¡Œ)
**å»ºè­°ï¼š** å¦‚æœç¹¼çºŒå¢é•·ï¼Œè€ƒæ…®æ‹†åˆ†ç‚º resources.service.ts å’Œ resources-export.service.ts

**å„ªå…ˆç´šï¼š** â­â­

---

### 10. `frontend/src/components/BlockEditor/BlockEditor.vue` (549 è¡Œ)
**å»ºè­°ï¼š** å¦‚æœç¹¼çºŒå¢é•·ï¼Œè€ƒæ…®å°‡éƒ¨åˆ†é‚è¼¯æå–åˆ° composables

**å„ªå…ˆç´šï¼š** â­â­

---

## é‡æ§‹å„ªå…ˆç´šç¸½çµ

### ç«‹å³è™•ç†ï¼ˆæœ¬é€±ï¼‰
1. âœ… `frontend/src/services/api.ts` - å½±éŸ¿æœ€å¤§ï¼Œå½±éŸ¿æ‰€æœ‰é–‹ç™¼è€…

### çŸ­æœŸè™•ç†ï¼ˆæœ¬æœˆï¼‰
2. âœ… `backend/src/cramschool/services/questions.service.ts`
3. âœ… `backend/src/cramschool/services/students.service.ts`
4. âœ… `frontend/src/views/QuestionForm.vue`

### ä¸­æœŸè™•ç†ï¼ˆä¸‹å€‹æœˆï¼‰
5. âš ï¸ `frontend/src/composables/usePrintPreview.ts`
6. âš ï¸ `frontend/src/components/QuestionList.vue`
7. âš ï¸ `frontend/src/views/StudentList.vue`
8. âš ï¸ `frontend/src/router/index.ts`

---

## é‡æ§‹åŸå‰‡

1. **å–®ä¸€è·è²¬åŸå‰‡**ï¼šæ¯å€‹æ¨¡çµ„/çµ„ä»¶åªè² è²¬ä¸€å€‹åŠŸèƒ½
2. **é—œæ³¨é»åˆ†é›¢**ï¼šå°‡æ¥­å‹™é‚è¼¯ã€UI é‚è¼¯ã€è³‡æ–™è™•ç†åˆ†é›¢
3. **å¯æ¸¬è©¦æ€§**ï¼šæ‹†åˆ†å¾Œçš„æ¨¡çµ„æ‡‰è©²æ˜“æ–¼å–®å…ƒæ¸¬è©¦
4. **å¯ç¶­è­·æ€§**ï¼šæ¸›å°‘æª”æ¡ˆå¤§å°ï¼Œæé«˜å¯è®€æ€§
5. **å‘å¾Œå…¼å®¹**ï¼šé‡æ§‹æ™‚ä¿æŒ API æ¥å£ä¸è®Š

---

## å»ºè­°çš„é‡æ§‹æ­¥é©Ÿ

### éšæ®µ 1ï¼šAPI æœå‹™é‡æ§‹ï¼ˆæœ€é«˜å„ªå…ˆç´šï¼‰
1. å‰µå»ºæ–°çš„æ¨¡çµ„åŒ–çµæ§‹
2. é€æ­¥é·ç§» APIï¼ˆå…ˆé·ç§»ä½¿ç”¨é »ç‡ä½çš„ï¼‰
3. ä¿æŒèˆŠ API å¯ç”¨ï¼Œæ¨™è¨˜ç‚º deprecated
4. æ›´æ–°æ‰€æœ‰å¼•ç”¨
5. ç§»é™¤èˆŠä»£ç¢¼

### éšæ®µ 2ï¼šå¾Œç«¯æœå‹™é‡æ§‹
1. å‰µå»ºæ–°çš„æœå‹™çµæ§‹
2. æå–æŸ¥è©¢é‚è¼¯åˆ°ç¨ç«‹æœå‹™
3. æå–æ¬Šé™æª¢æŸ¥é‚è¼¯
4. é‡æ§‹ç¾æœ‰æœå‹™ä½¿ç”¨æ–°çµæ§‹

### éšæ®µ 3ï¼šå‰ç«¯çµ„ä»¶é‡æ§‹
1. æå– composables
2. æ‹†åˆ†å¤§å‹çµ„ä»¶
3. å‰µå»ºå¯é‡ç”¨çµ„ä»¶
4. å„ªåŒ–ç‹€æ…‹ç®¡ç†

---

## æ³¨æ„äº‹é …

1. **ä¸è¦ä¸€æ¬¡æ€§é‡æ§‹æ‰€æœ‰æª”æ¡ˆ**ï¼šå„ªå…ˆè™•ç†å½±éŸ¿æœ€å¤§çš„æª”æ¡ˆ
2. **ä¿æŒå‘å¾Œå…¼å®¹**ï¼šé‡æ§‹æ™‚ç¢ºä¿ç¾æœ‰åŠŸèƒ½ä¸å—å½±éŸ¿
3. **å……åˆ†æ¸¬è©¦**ï¼šé‡æ§‹å¾Œé€²è¡Œå®Œæ•´æ¸¬è©¦
4. **æ–‡æª”æ›´æ–°**ï¼šæ›´æ–°ç›¸é—œæ–‡æª”å’Œè¨»é‡‹
5. **ä»£ç¢¼å¯©æŸ¥**ï¼šé‡æ§‹å¾Œçš„ä»£ç¢¼éœ€è¦ç¶“éå¯©æŸ¥

---

## å·¥å…·å»ºè­°

1. **ESLint**ï¼šé…ç½®è¤‡é›œåº¦è¦å‰‡ï¼ˆå¦‚ max-lines, max-lines-per-functionï¼‰
2. **SonarQube**ï¼šå®šæœŸæƒæè¤‡é›œåº¦
3. **Code Climate**ï¼šè¿½è¹¤æŠ€è¡“å‚µå‹™
4. **GitHub Actions**ï¼šè‡ªå‹•æª¢æŸ¥æª”æ¡ˆå¤§å°å’Œè¤‡é›œåº¦

---

## å¾ŒçºŒè¿½è¹¤

å»ºè­°åœ¨æ¯æ¬¡é‡æ§‹å¾Œæ›´æ–°æ­¤æ–‡ä»¶ï¼Œè¨˜éŒ„ï¼š
- é‡æ§‹æ—¥æœŸ
- é‡æ§‹å…§å®¹
- é‡æ§‹å‰å¾Œçš„è¡Œæ•¸å°æ¯”
- æ¸¬è©¦è¦†è“‹ç‡è®ŠåŒ–
