# é¡Œåº«ç¯©é¸åŠŸèƒ½ä¿®æ­£ç¸½çµ

## ğŸ“‹ ä¿®æ­£å…§å®¹

### 1. æ–°å¢ä¾†æºç¯©é¸åŠŸèƒ½ â­
- **ä½ç½®**ï¼š`frontend/src/components/QuestionList.vue`
- **ä¿®æ”¹**ï¼š
  - åœ¨ç¯©é¸è¡¨å–®ä¸­æ–°å¢ã€Œä¾†æºã€ä¸‹æ‹‰é¸å–®
  - æ–°å¢ `sourceOptions` ref ä¾†å„²å­˜ä¾†æºé¸é …
  - æ–°å¢ `fetchSourceOptions()` å‡½æ•¸å¾ API ç²å–ä¾†æºé¸é …
  - åœ¨ `filters` ä¸­æ–°å¢ `source` æ¬„ä½
  - åœ¨ `fetchQuestions()` ä¸­å‚³é `source` åƒæ•¸
  - åœ¨ `resetFilters()` ä¸­é‡ç½® `source` æ¬„ä½

### 2. ä¿®æ­£æ¨™ç±¤ç¯©é¸åƒæ•¸å•é¡Œ
- **ä½ç½®**ï¼š`backend/cramschool/api_views.py` (ç¬¬ 1232 è¡Œ)
- **å•é¡Œ**ï¼šå¾Œç«¯åªæ”¯æ´ `tags[]` æ ¼å¼ï¼Œå‰ç«¯å‚³é `tags` æ ¼å¼
- **ä¿®æ­£**ï¼šå¾Œç«¯ç¾åœ¨åŒæ™‚æ”¯æ´å…©ç¨®æ ¼å¼
  ```python
  tags = self.request.query_params.getlist('tags[]') or self.request.query_params.getlist('tags')
  ```

### 3. ç§»é™¤ç„¡æ•ˆçš„åˆ†é åƒæ•¸
- **ä½ç½®**ï¼š`frontend/src/components/QuestionList.vue` (ç¬¬ 527-528 è¡Œ)
- **å•é¡Œ**ï¼šDRF çš„ `PageNumberPagination` ä¸æ”¯æ´ `page_size` æŸ¥è©¢åƒæ•¸
- **ä¿®æ­£**ï¼šç§»é™¤ `params.page_size`ï¼Œä½¿ç”¨å¾Œç«¯é»˜èªå€¼ 10

## âœ… é©—è­‰çµæœ

ä½¿ç”¨ `quick_check.sh` è…³æœ¬é©—è­‰ï¼Œæ‰€æœ‰é…ç½®éƒ½æ­£ç¢ºï¼š

- âœ… åˆ†é é¡åˆ¥é…ç½®æ­£ç¢º
- âœ… åˆ†é å¤§å°é…ç½®æ­£ç¢º (10)
- âœ… æ¨™ç±¤ç¯©é¸æ”¯æ´å…©ç¨®æ ¼å¼
- âœ… ä¾†æºç¯©é¸å·²å¯¦ç¾
- âœ… ä¾†æºç¯©é¸æ¬„ä½å·²æ·»åŠ 
- âœ… ä¾†æºé¸é …ç²å–å‡½æ•¸å·²å¯¦ç¾
- âœ… å·²ç§»é™¤ç„¡æ•ˆçš„ page_size åƒæ•¸
- âœ… ä¾†æºé¸é … API æ–¹æ³•å·²å¯¦ç¾

## ğŸ§ª æ¸¬è©¦æ–¹æ³•

### å¿«é€Ÿæª¢æŸ¥
```bash
./quick_check.sh
```

### æ‰‹å‹•æ¸¬è©¦
è«‹åƒè€ƒ `TESTING_GUIDE.md` ä¸­çš„è©³ç´°æ¸¬è©¦æ­¥é©Ÿ

### è‡ªå‹•åŒ–æ¸¬è©¦ï¼ˆå¯é¸ï¼‰
```bash
python test_question_filters.py
```

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶æ¸…å–®

1. `frontend/src/components/QuestionList.vue`
   - æ–°å¢ä¾†æºç¯©é¸ UI
   - æ–°å¢ä¾†æºé¸é …ç²å–é‚è¼¯
   - ç§»é™¤ç„¡æ•ˆçš„ `page_size` åƒæ•¸

2. `backend/cramschool/api_views.py`
   - ä¿®æ­£æ¨™ç±¤ç¯©é¸åƒæ•¸è™•ç†ï¼ˆæ”¯æ´å…©ç¨®æ ¼å¼ï¼‰

## ğŸ¯ åŠŸèƒ½ç¢ºèª

æ‰€æœ‰ç¯©é¸åŠŸèƒ½ç¾åœ¨éƒ½æ‡‰è©²æ­£å¸¸é‹ä½œï¼š

- âœ… ç§‘ç›®ç¯©é¸
- âœ… å¹´ç´šç¯©é¸
- âœ… ç« ç¯€ç¯©é¸
- âœ… é›£åº¦ç¯©é¸
- âœ… é¡Œç›®é¡å‹ç¯©é¸
- âœ… æ¨™ç±¤ç¯©é¸
- âœ… ä¾†æºç¯©é¸ â­ æ–°å¢
- âœ… å¤šæ¢ä»¶çµ„åˆç¯©é¸
- âœ… åˆ†é åŠŸèƒ½
- âœ… é‡ç½®åŠŸèƒ½

## ğŸ“š ç›¸é—œæ–‡æª”

- `TESTING_GUIDE.md` - è©³ç´°çš„æ¸¬è©¦æŒ‡å—
- `test_question_filters.py` - Python è‡ªå‹•åŒ–æ¸¬è©¦è…³æœ¬
- `quick_check.sh` - å¿«é€Ÿé…ç½®æª¢æŸ¥è…³æœ¬

## ğŸ” æŠ€è¡“ç´°ç¯€

### å‰ç«¯åƒæ•¸æ˜ å°„
| å‰ç«¯åƒæ•¸ | å¾Œç«¯åƒæ•¸ | å¾Œç«¯è™•ç† |
|---------|---------|---------|
| `subject` | `subject` | `filter(subject_id=...)` |
| `level` | `level` | `filter(level=...)` |
| `chapter` | `chapter` | `filter(chapter__icontains=...)` |
| `difficulty` | `difficulty` | `filter(difficulty=...)` |
| `question_type` | `question_type` | `filter(question_type=...)` |
| `tags` (é™£åˆ—) | `tags[]` æˆ– `tags` | `filter(tags__tag_id__in=...)` |
| `source` | `source` | `filter(source=...)` |
| `page` | `page` | DRF åˆ†é è™•ç† |

### API ç«¯é»
- ç²å–é¡Œç›®åˆ—è¡¨ï¼š`GET /api/cramschool/questions/?{filters}`
- ç²å–ä¾†æºé¸é …ï¼š`GET /api/cramschool/questions/source_options/`

### åˆ†é é…ç½®
- å¾Œç«¯ï¼š`PAGE_SIZE = 10` (åœ¨ `settings.py` ä¸­)
- å‰ç«¯ï¼š`pageSize: 10` (åœ¨ `QuestionList.vue` ä¸­)
- å…©è€…ä¸€è‡´ï¼Œç¢ºä¿åˆ†é è¨ˆç®—æ­£ç¢º

## âœ¨ ä¸‹ä¸€æ­¥

1. åœ¨å¯¦éš›ç’°å¢ƒä¸­æ¸¬è©¦æ‰€æœ‰ç¯©é¸åŠŸèƒ½
2. ç¢ºèªä¾†æºé¸é … API è¿”å›æ­£ç¢ºçš„æ•¸æ“š
3. æ¸¬è©¦å¤šç¨®ç¯©é¸æ¢ä»¶çµ„åˆ
4. é©—è­‰åˆ†é åŠŸèƒ½åœ¨ä¸åŒæ•¸æ“šé‡ä¸‹çš„è¡¨ç¾

---

**ä¿®æ­£æ—¥æœŸ**ï¼š2024-12-XX  
**ç‹€æ…‹**ï¼šâœ… å·²å®Œæˆä¸¦é©—è­‰
